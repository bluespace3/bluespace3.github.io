---
title: 'ACP-Claude-Code快捷指令'
categories: ["ACP-Claude-Code快捷指令.md"]
date: 2026-02-28T01:35:43+08:00
lastmod: 2026-02-28T01:35:43+08:00
encrypted: false
---

> 最后更新：2026-02-28
> ACP (Agent Client Protocol) 是 OpenClaw 接入 Claude Code 的方式，但本笔记重点是 Claude Code 本身的使用

---

## 什么是 ACP？

ACP (Agent Client Protocol) 让 OpenClaw 能调用外部编码工具（Claude Code、Codex 等）。

**在 OpenClaw 中使用 Claude Code：**
```bash
# 启动 Claude Code 会话
/acp spawn claude --mode persistent

# 配置默认使用 Claude Code
openclaw config set acp.defaultAgent claude
```

**更多信息：** 查看 OpenClaw 文档中的 ACP 部分

---

## Claude Code 快捷键

### 基础快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Enter` | 发送消息 | 提交当前请求 |
| `Esc` | 停止生成 | 中断当前生成 |
| `Ctrl+C` | 清除输入 | 按一次清除输入，按两次退出 |

### 导航快捷键

| 快捷键 | 功能 |
|--------|------|
| `↑/↓` | 浏览历史消息 |
| `Ctrl+L` | 清屏 |
| `Ctrl+U` | 清除到行首 |
| `Ctrl+K` | 清除到行尾 |

### 文件操作

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+O` | 打开文件 |
| `Ctrl+W` | 保存当前更改 |

---

## Claude Code 核心指令

### 文件操作

| 指令 | 功能 | 示例 |
|------|------|------|
| `read <file>` | 读取文件内容 | `read src/main.py` |
| `write <file>` | 写入文件 | `write output.txt` |
| `edit <file>` | 编辑文件 | `edit config.yaml` |
| `list <dir>` | 列出目录内容 | `list src/` |
| `search <pattern>` | 搜索文件 | `search "TODO"` |

### 代码分析

| 指令 | 功能 | 示例 |
|------|------|------|
| `analyze <file>` | 分析代码 | `analyze app.js` |
| `explain <code>` | 解释代码 | `explain for i in range(10):` |
| `debug <file>` | 调试代码 | `debug server.py` |
| `refactor <file>` | 重构代码 | `refactor legacy.js` |

### Git 操作

| 指令 | 功能 | 示例 |
|------|------|------|
| `git status` | 查看 Git 状态 | `git status` |
| `git diff` | 查看改动 | `git diff` |
| `git commit` | 提交更改 | `git commit "fix bug"` |
| `git log` | 查看提交历史 | `git log` |

### 测试相关

| 指令 | 功能 | 示例 |
|------|------|------|
| `test` | 运行测试 | `test` |
| `test <file>` | 运行特定测试 | `test test_main.py` |
| `coverage` | 查看测试覆盖率 | `coverage` |

---

## Claude Code 使用技巧

### 1. 上下文管理

**最佳实践：**
- 先用 `read` 读取相关文件，再提出具体问题
- 使用 `@file` 语法引用文件（如果支持）
- 保持对话连贯，避免频繁切换无关话题

**示例：**
```
你：read package.json
你：读取 src/index.js
你：分析这个项目的依赖和入口文件有什么问题？
```

### 2. 代码修改技巧

**渐进式修改：**
- 先让 Claude 理解现有代码
- 然后提出具体修改需求
- 检查修改结果，必要时迭代

**示例：**
```
你：先理解这个函数的逻辑
你：重构它，添加错误处理
你：确保添加了日志记录
```

### 3. 调试技巧

**系统化调试：**
1. 描述问题和预期行为
2. 提供错误信息和日志
3. 让 Claude 分析可能的原因
4. 根据建议逐步排查

**示例：**
```
你：运行测试时出现这个错误：[粘贴错误]
你：这是测试文件内容：[read test.js]
你：帮我找出问题所在
```

### 4. 代码审查

**高效审查：**
- 让 Claude 检查代码质量、安全性、性能
- 请求改进建议
- 要求解释具体问题

**示例：**
```
你：审查这段代码的安全性
你：指出潜在的性能问题
你：给出改进建议
```

### 5. 重构策略

**安全重构：**
1. 先让 Claude 理解代码意图
2. 讨论重构方案
3. 执行重构并验证
4. 确保测试通过

**示例：**
```
你：理解这个模块的设计
你：如何将其改为使用设计模式？
你：执行重构，保持功能不变
```

---

## 高级用法

### 1. 多文件操作

**批量操作：**
```
你：列出所有 Python 文件
你：为每个文件添加类型注解
```

**依赖关系分析：**
```
你：分析 src/ 目录下所有文件的依赖关系
你：画出模块依赖图
```

### 2. 自动化脚本

**生成脚本：**
```
你：生成一个自动化部署脚本
你：要求：备份、构建、测试、部署
```

**重构生成：**
```
你：将这个重复的代码抽象为可复用的函数
```

### 3. 文档生成

**自动生成文档：**
```
你：为这个模块生成 README
你：包含：安装、使用、API 说明
```

**代码注释：**
```
你：为所有函数添加清晰的文档字符串
```

### 4. 配置管理

**配置文件转换：**
```
你：将 XML 配置转为 YAML
```

**环境变量管理：**
```
你：生成 .env 文件示例
```

---

## 常见任务速查

### 修复 Bug
```
1. read <出错文件>
2. 分析错误信息
3. 询问 Claude 可能的原因
4. 应用修复方案
5. 验证修复
```

### 添加新功能
```
1. read 相关文件
2. 解释需求和设计
3. 让 Claude 实现功能
4. 审查和测试代码
```

### 重构代码
```
1. read 要重构的代码
2. 讨论重构目标
3. 执行重构
4. 运行测试确保不破坏功能
```

### 编写测试
```
1. read 要测试的代码
2. 让 Claude 编写测试用例
3. 运行测试
4. 根据结果调整
```

### 性能优化
```
1. read 性能瓶颈代码
2. 让 Claude分析优化点
3. 应用优化方案
4. 验证性能提升
```

---

## 最佳实践

### 对话技巧

**1. 明确具体**
- ❌ "帮我优化代码"
- ✅ "优化这个循环的时间复杂度"

**2. 提供上下文**
- 先 `read` 相关文件
- 说明代码的目的和约束

**3. 逐步迭代**
- 不要一次提出太多要求
- 分步骤完成复杂任务

**4. 验证结果**
- 运行测试
- 检查代码质量
- 确认需求满足

### 工作流建议

**开发新功能：**
```
1. read 现有代码
2. 讨论设计方案
3. 实现核心功能
4. 编写测试
5. 完善和优化
```

**修复 Bug：**
```
1. 复现问题
2. read 相关代码
3. 分析根因
4. 实施修复
5. 验证修复
6. 添加测试防止回归
```

**代码审查：**
```
1. read 完整代码
2. 逐层审查（逻辑、安全、性能）
3. 记录问题
4. 讨论改进方案
5. 应用改进
```

---

## 提示词模板

### 代码分析
```
分析这段代码：
- 潜在的 Bug
- 性能问题
- 安全隐患
- 改进建议
```

### 功能实现
```
实现以下功能：
1. [具体需求 1]
2. [具体需求 2]
3. [具体需求 3]

约束条件：
- 不破坏现有功能
- 符合项目编码规范
- 添加必要的测试
```

### 代码重构
```
重构目标：
- [目标 1]
- [目标 2]

要求：
- 保持功能不变
- 提高可读性
- 添加注释
```

### 调试帮助
```
遇到的问题：
[描述问题]

错误信息：
[粘贴错误]

相关代码：
[read 相关文件]

帮助我：
1. 找出问题原因
2. 提供修复方案
3. 解释为什么会发生
```

---

## 常见问题

### Q: 如何让 Claude Code 更好地理解我的代码？
A:
- 提供完整的文件内容
- 说明代码的目的和业务逻辑
- 解释关键设计决策
- 提供相关配置和依赖

### Q: 如何避免 Claude 产生错误代码？
A:
- 明确需求，避免模糊描述
- 要求 Claude 解释生成代码的逻辑
- 始终运行测试验证
- 逐步迭代，不要一次要求太多

### Q: 如何处理大型项目？
A:
- 分模块处理
- 使用项目结构说明
- 先处理核心模块，再处理细节
- 保持上下文连贯

### Q: Claude Code 能处理哪些语言？
A: Claude Code 支持几乎所有编程语言，包括：
- Python, JavaScript, TypeScript
- Java, C++, Go, Rust
- Ruby, PHP, Swift, Kotlin
- 以及其他常见语言

---

## 相关资源

- **Claude 官方文档**: https://docs.anthropic.com/
- **ACP 协议**: https://agentclientprotocol.com/
- **OpenClaw ACP 配置**: 查看 OpenClaw 文档 ACP 部分
