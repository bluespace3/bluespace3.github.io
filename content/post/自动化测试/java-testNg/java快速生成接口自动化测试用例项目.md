---
title: 'javaå¿«é€Ÿç”ŸæˆæŽ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹é¡¹ç›®'
categories: ["è‡ªåŠ¨åŒ–æµ‹è¯•"]
date: 2025-11-22T00:04:32+08:00
lastmod: 2025-11-22T00:04:32+08:00
encrypted: false
---
# javaå¿«é€Ÿç”ŸæˆæŽ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹é¡¹ç›®

ä½¿ç”¨TestNG å’Œ REST Assured è¿›è¡Œ API æµ‹è¯•ï¼Œå¹¶æ”¯æŒæµ‹è¯•ç”¨ä¾‹ä¸ŽæŽ¥å£é€»è¾‘åˆ†ç¦»çš„æž¶æž„ã€‚æœ¬æ¡†æž¶æä¾›å®Œæ•´çš„HARæ–‡ä»¶è‡ªåŠ¨åŒ–è½¬æ¢ã€æµ‹è¯•ç”¨ä¾‹ä¾èµ–ç®¡ç†ã€æ•°æ®é©±åŠ¨æµ‹è¯•ã€æ•°æ®åº“é›†æˆç­‰é«˜çº§åŠŸèƒ½ã€‚

## ç›®å½•

- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [HARæ–‡ä»¶è‡ªåŠ¨åŒ–æµ‹è¯•ç”Ÿæˆ](#haræ–‡ä»¶è‡ªåŠ¨åŒ–æµ‹è¯•ç”Ÿæˆ)
  - [è‡ªåŠ¨Tokenå¤„ç†ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰](#è‡ªåŠ¨tokenå¤„ç†é«˜çº§åŠŸèƒ½)
- [æµ‹è¯•ç”¨ä¾‹é…ç½®è¯¦è§£](#æµ‹è¯•ç”¨ä¾‹é…ç½®è¯¦è§£)
- [é«˜çº§åŠŸèƒ½](#é«˜çº§åŠŸèƒ½)
- [è¿è¡Œå’Œè°ƒè¯•](#è¿è¡Œå’Œè°ƒè¯•)
- [é¡¹ç›®æž¶æž„](#é¡¹ç›®æž¶æž„)
- [æœ€ä½³å®žè·µ](#æœ€ä½³å®žè·µ)

## æ ¸å¿ƒç‰¹æ€§

### ðŸš€ HARæ–‡ä»¶è‡ªåŠ¨åŒ–

- **ä¸€é”®è½¬æ¢**: å°†æµè§ˆå™¨å½•åˆ¶çš„HARæ–‡ä»¶è‡ªåŠ¨è½¬æ¢ä¸ºå®Œæ•´çš„æµ‹è¯•å¥—ä»¶
- **æ™ºèƒ½è§£æž**: è‡ªåŠ¨æå–è¯·æ±‚ä¿¡æ¯ã€å“åº”æ–­è¨€å’Œè®¤è¯æ•°æ®
- **ç›´æŽ¥è¿è¡Œ**: ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ— éœ€ä¿®æ”¹å³å¯æ‰§è¡Œ

### ðŸ”— æµ‹è¯•ç”¨ä¾‹ä¾èµ–ç®¡ç†

- **ä¾èµ–å£°æ˜Ž**: é€šè¿‡ `dependsOn` å­—æ®µæŒ‡å®šæµ‹è¯•ç”¨ä¾‹é—´çš„ä¾èµ–å…³ç³»
- **è‡ªåŠ¨æŽ’åº**: ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œæ‹“æ‰‘æŽ’åºï¼Œç¡®ä¿æ­£ç¡®çš„æ‰§è¡Œé¡ºåº
- **å¾ªçŽ¯æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹å¹¶æŠ¥å‘Šå¾ªçŽ¯ä¾èµ–é”™è¯¯

### ðŸ“Š æ•°æ®é©±åŠ¨æµ‹è¯•

- **å‚æ•°åŒ–**: å•ä¸ªæµ‹è¯•ç”¨ä¾‹æ”¯æŒå¤šç»„æµ‹è¯•æ•°æ®
- **åŠ¨æ€å˜é‡**: æ”¯æŒä¸Šä¸‹æ–‡å˜é‡ã€çŽ¯å¢ƒå˜é‡ã€å†…ç½®å˜é‡å’Œè‡ªå®šä¹‰å˜é‡ç”Ÿæˆå™¨
- **æ•°æ®æå–**: ä»ŽAPIå“åº”ä¸­æå–æ•°æ®å¹¶å­˜å‚¨åˆ°æµ‹è¯•ä¸Šä¸‹æ–‡ä¸­

### ðŸ’¾ æ•°æ®åº“é›†æˆ

- **è¯·æ±‚å‰æŸ¥è¯¢**: ä»Žæ•°æ®åº“èŽ·å–æ•°æ®ä½œä¸ºAPIè¯·æ±‚å‚æ•°
- **è¯·æ±‚åŽéªŒè¯**: éªŒè¯APIæ“ä½œåŽæ•°æ®åº“ä¸­çš„æ•°æ®æ˜¯å¦æ­£ç¡®
- **å¤šæ•°æ®åº“æ”¯æŒ**: MySQLã€PostgreSQLã€H2ç­‰

### ðŸŽ¯ ç²¾å‡†æµ‹è¯•æ‰§è¡Œ

- **å•ç”¨ä¾‹æ‰§è¡Œ**: é€šè¿‡ `-DtestId` å‚æ•°æ‰§è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
- **åˆ†ç»„æ‰¹é‡æ‰§è¡Œ**: é€šè¿‡ `-DtestGroup` å‚æ•°æ‰§è¡Œç‰¹å®šåˆ†ç»„çš„æµ‹è¯•
- **è‡ªåŠ¨ä¾èµ–åŒ…å«**: æ‰§è¡Œæ—¶è‡ªåŠ¨åŒ…å«æ‰€æœ‰ä¾èµ–çš„æµ‹è¯•ç”¨ä¾‹

### ðŸ“ æ™ºèƒ½å¤±è´¥è¯Šæ–­

- **è¯¦ç»†æ—¥å¿—**: è‡ªåŠ¨è®°å½•å¤±è´¥æµ‹è¯•çš„å®Œæ•´è¯·æ±‚/å“åº”ä¿¡æ¯
- **æ—¥å¿—æ–‡ä»¶**: å¤±è´¥ä¿¡æ¯åŒæ—¶ä¿å­˜åˆ° `target/logs/test_failures.log`
- **UTF-8æ”¯æŒ**: æ­£ç¡®å¤„ç†ä¸­æ–‡å†…å®¹

## å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

- Java 8+
- Maven 3.6+

### å®‰è£…å’Œé…ç½®

1. å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°
2. è¿è¡Œ `mvn compile` ç¼–è¯‘é¡¹ç›®
3. ï¼ˆå¯é€‰ï¼‰é…ç½®æ•°æ®åº“è¿žæŽ¥ï¼šä¿®æ”¹ `src/test/resources/database.properties`

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **å½•åˆ¶HARæ–‡ä»¶**: åœ¨æµè§ˆå™¨ä¸­å½•åˆ¶APIæ“ä½œæµç¨‹
2. **ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹**: ä½¿ç”¨ `import-har.bat your-file.har` è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•
3. **è¿è¡Œæµ‹è¯•**: æ‰§è¡Œ `mvn test` è¿è¡Œæ‰€æœ‰æµ‹è¯•
4. **æŸ¥çœ‹æŠ¥å‘Š**: ä½¿ç”¨ `allure serve target/allure-results` æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š

## HARæ–‡ä»¶è‡ªåŠ¨åŒ–æµ‹è¯•ç”Ÿæˆ

### ä½¿ç”¨æ–¹æ³•

```bash
# Windowsæ‰¹å¤„ç†ï¼ˆæŽ¨èï¼‰
import-har.bat your-file.har                    # è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç±»åç§°
import-har.bat your-file.har MyCustomTest       # æŒ‡å®šè‡ªå®šä¹‰æµ‹è¯•ç±»åç§°
import-har.bat har-files-directory/             # æ‰¹é‡å¯¼å…¥ç›®å½•ä¸‹æ‰€æœ‰HARæ–‡ä»¶

# PowerShellç‰ˆæœ¬
.\import-har.ps1 your-file.har
.\import-har.ps1 your-file.har MyCustomTest
.\import-har.ps1 har-files-directory/
```

### ç”Ÿæˆçš„æ–‡ä»¶è¯´æ˜Ž

**1. æµ‹è¯•ç”¨ä¾‹é…ç½®æ–‡ä»¶**

- è·¯å¾„: `src/test/resources/testcases/{har-file-name}_test_cases.json`
- å†…å®¹: åŒ…å«ä»ŽHARæ–‡ä»¶è§£æžçš„æ‰€æœ‰APIè¯·æ±‚ä¿¡æ¯å’ŒåŸºç¡€æ–­è¨€

**2. ç»Ÿä¸€æ‰§è¡Œæ¨¡å¼**

- é»˜è®¤å¯ç”¨ç»Ÿä¸€é…ç½®æ¨¡å¼ï¼Œæ‰€æœ‰HARæ–‡ä»¶çš„æµ‹è¯•ç”¨ä¾‹éƒ½æ·»åŠ åˆ°ç»Ÿä¸€é…ç½®æ–‡ä»¶
- åªéœ€è¦ä¸€ä¸ªæµ‹è¯•ç±»: `UnifiedApiTest`
- æ‰¹é‡å¯¼å…¥æ—¶ï¼Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é›†ä¸­ç®¡ç†ï¼Œæ— éœ€ç»´æŠ¤å¤šä¸ªæµ‹è¯•ç±»

### è‡ªåŠ¨Tokenå¤„ç†ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰

ä¸ºäº†ç®€åŒ–éœ€è¦è®¤è¯çš„APIæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆï¼Œæ¡†æž¶æä¾›äº†è‡ªåŠ¨Tokenå¤„ç†åŠŸèƒ½ã€‚å¯ç”¨æ­¤åŠŸèƒ½åŽï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ç›¸åŒåº”ç”¨çš„æŽ¥å£ï¼Œå¹¶å°†ä»ŽloginæŽ¥å£æå–çš„tokenè‡ªåŠ¨èµ‹å€¼åˆ°ç›¸å…³è¯·æ±‚å‚æ•°ä¸­ã€‚

#### é…ç½®æ–‡ä»¶è®¾ç½®

é¦–å…ˆéœ€è¦åœ¨ `src/test/resources/config/registered-apps.json` ä¸­æ³¨å†Œå·²çŸ¥çš„åº”ç”¨å’Œå¯¹åº”çš„loginæŽ¥å£ï¼š

```json
[
  {
    "origin": "https://testntr.yaoshibang.cn",
    "loginTestCaseId": "POST__wsms_pc_auth_login"
  }
]
```

**é…ç½®å­—æ®µè¯´æ˜Ž**:

- `origin`: åº”ç”¨çš„Origin URLï¼ˆå¿…é¡»ä¸ŽHARæ–‡ä»¶ä¸­çš„Origin headerå®Œå…¨åŒ¹é…ï¼‰
- `loginTestCaseId`: å¯¹åº”çš„loginæŽ¥å£æµ‹è¯•ç”¨ä¾‹ID

#### ä½¿ç”¨æ–¹æ³•

åœ¨å¯¼å…¥HARæ–‡ä»¶æ—¶æ·»åŠ  `--auto-token` å‚æ•°ï¼š

```bash
# å•æ–‡ä»¶å¯¼å…¥ï¼ˆå¯ç”¨è‡ªåŠ¨tokenå¤„ç†ï¼‰
import-har.bat your-file.har --auto-token

# æŒ‡å®šæµ‹è¯•ç±»å + è‡ªåŠ¨tokenå¤„ç†
import-har.bat your-file.har MyCustomTest --auto-token

# æ‰¹é‡å¯¼å…¥ç›®å½•ï¼ˆå¯ç”¨è‡ªåŠ¨tokenå¤„ç†ï¼‰
import-har.bat har-files-directory/ --auto-token
```

#### åŠŸèƒ½è¯´æ˜Ž

1. **åŸŸåæ ¡éªŒ**: ç³»ç»Ÿä¼šæ£€æŸ¥HARæ–‡ä»¶ä¸­æ¯ä¸ªè¯·æ±‚çš„Origin headeræ˜¯å¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ
2. **é”™è¯¯å¤„ç†**: å¦‚æžœå‘çŽ°æœªæ³¨å†Œçš„åŸŸåï¼Œä¼šè¾“å‡ºé”™è¯¯æ—¥å¿— `"å¯¼å…¥é”™è¯¯ï¼Œæœªå‘çŽ°è¯¥åº”ç”¨ç™»é™†æŽ¥å£: [Originå€¼]"` å¹¶è·³è¿‡è¯¥è¯·æ±‚
3. **è‡ªåŠ¨é…ç½®**:
   - **LoginæŽ¥å£**: è‡ªåŠ¨æ·»åŠ extractorsé…ç½®æå–authToken
   - **å…¶ä»–æŽ¥å£**: è‡ªåŠ¨æ·»åŠ  `dependsOn` ä¾èµ–å’Œ `${context.authToken}` tokenå‚æ•°
4. **å‘åŽå…¼å®¹**: ä¸ä½¿ç”¨ `--auto-token` å‚æ•°æ—¶ï¼Œä¿æŒåŽŸæœ‰è¡Œä¸ºä¸å˜

#### ç¤ºä¾‹è¾“å‡º

```
âœ… HARæ–‡ä»¶å¯¼å…¥å’Œæµ‹è¯•ç”ŸæˆæˆåŠŸï¼
ðŸ“ è¾“å…¥æ–‡ä»¶: testntr.yaoshibang.cn.har
ðŸ§ª æµ‹è¯•ç±»å: TestntrYaoshibangCnTest
ðŸš€ çŽ°åœ¨å¯ä»¥è¿è¡Œ: mvn test -Dtest=UnifiedApiTest
```

> **æ³¨æ„**: æ­¤åŠŸèƒ½éœ€è¦é¢„å…ˆåœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œåº”ç”¨ä¿¡æ¯ï¼Œç¡®ä¿ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹å¯ä»¥ç›´æŽ¥è¿è¡Œå¹¶è¿›è¡ŒåŸºç¡€æ–­è¨€æµ‹è¯•ã€‚

## æµ‹è¯•ç”¨ä¾‹é…ç½®è¯¦è§£

### åŸºç¡€æµ‹è¯•ç”¨ä¾‹ç»“æž„

```json
{
  "id": "TC001",
  "name": "TestName",
  "description": "æµ‹è¯•æè¿°",
  "endpoint": "/api/users/{id}",
  "method": "GET",
  "pathParam": "3",
  "headers": {
    "Content-Type": "application/json"
  },
  "cookies": {},
  "requestBody": null,
  "assertions": {
    "statusCode": 200,
    "body.name": "é¢„æœŸç”¨æˆ·å"
  }
}
```

### æµ‹è¯•ç”¨ä¾‹IDç”Ÿæˆè§„åˆ™

- **æ ¼å¼**: `{har_file_name}_{HTTP_METHOD}_{cleaned_endpoint}`
- **ç¤ºä¾‹**: `testntr_yaoshibang_cn_POST__wsms_pc_auth_login`
- **åŽ»é‡æœºåˆ¶**: å³ä½¿åœ¨ç‹¬ç«‹JSONæ¨¡å¼ä¸‹ä¹Ÿä¼šè‡ªåŠ¨åŽ»é‡ï¼Œé¿å…é‡å¤å¯¼å…¥

### æ”¯æŒçš„æ–­è¨€ç±»åž‹

- **statusCode**: HTTPçŠ¶æ€ç  (æ•°å­—)
- **body.xxx**: JSONè·¯å¾„æ–­è¨€ï¼Œæ”¯æŒä»¥ä¸‹ç‰¹æ®Šå€¼ï¼š
  - `"æ™®é€šå€¼"`: ç²¾ç¡®åŒ¹é…
  - `"containsString:æ–‡æœ¬"`: åŒ…å«æŒ‡å®šæ–‡æœ¬
  - `"matchesRegex:æ­£åˆ™è¡¨è¾¾å¼"`: æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
  - `"notNull"`: éžç©ºå€¼æ£€æŸ¥
  - `"null"`: ç©ºå€¼æ£€æŸ¥
  - `"empty"`: ç©ºå­—ç¬¦ä¸²æˆ–ç©ºé›†åˆ
  - `"notEmpty"`: éžç©ºå­—ç¬¦ä¸²æˆ–éžç©ºé›†åˆ
  - `">æ•°å­—"`: å¤§äºŽæŒ‡å®šæ•°å­—
  - `"<æ•°å­—"`: å°äºŽæŒ‡å®šæ•°å­—
  - `"in:å€¼1,å€¼2,å€¼3"`: å€¼åœ¨æŒ‡å®šåˆ—è¡¨ä¸­
  - `"hasSize:æ•°å­—"`: é›†åˆå¤§å°æ£€æŸ¥

## é«˜çº§åŠŸèƒ½

### æµ‹è¯•ç”¨ä¾‹ä¾èµ–ç®¡ç†

```json
{
  "id": "get_user_profile",
  "name": "GetUserProfile",
  "description": "èŽ·å–ç”¨æˆ·ä¸ªäººèµ„æ–™ï¼ˆä¾èµ–ç™»å½•ï¼‰",
  "endpoint": "/api/user/profile",
  "method": "GET",
  "headers": {
    "Authorization": "Bearer ${context.authToken}"
  },
  "assertions": {
    "statusCode": 200,
    "body.userId": "${context.userId}"
  },
  "dependsOn": ["login_success"]
}
```

### æ•°æ®æå–åŠŸèƒ½

```json
{
  "id": "login_and_extract",
  "name": "LoginAndExtract",
  "description": "ç™»å½•å¹¶æå–è®¤è¯ä»¤ç‰Œ",
  "endpoint": "/api/auth/login",
  "method": "POST",
  "requestBody": "{\"username\": \"test\", \"password\": \"password\"}",
  "assertions": {
    "statusCode": 200,
    "body.status": "success"
  },
  "extractors": [
    {
      "source": "response.body",
      "path": "data.token",
      "target": "authToken",
      "type": "string"
    },
    {
      "source": "response.body",
      "path": "data.userId",
      "target": "userId",
      "type": "string"
    }
  ]
}
```

### å‚æ•°åŒ–æµ‹è¯•

```json
{
  "id": "search_products",
  "name": "SearchProducts",
  "description": "æœç´¢äº§å“æµ‹è¯•",
  "endpoint": "/api/products/search",
  "method": "POST",
  "testDataSets": [
    {
      "data": {
        "keyword": "laptop",
        "category": "electronics",
        "expectedCount": "10"
      }
    },
    {
      "data": {
        "keyword": "book",
        "category": "books",
        "expectedCount": "5"
      }
    }
  ],
  "requestBody": "{\"keyword\": \"${keyword}\", \"category\": \"${category}\"}",
  "assertions": {
    "statusCode": 200,
    "body.total": "${expectedCount}"
  }
}
```

### åŠ¨æ€å˜é‡ç³»ç»Ÿ

#### å†…ç½®åŠ¨æ€å˜é‡

- `${timestamp}` - å½“å‰æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
- `${timestamp_sec}` - å½“å‰æ—¶é—´æˆ³ï¼ˆç§’ï¼‰
- `${uuid}` - éšæœºUUID
- `${date}` - å½“å‰æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰
- `${datetime}` - å½“å‰æ—¥æœŸæ—¶é—´
- `${random}` - éšæœºå°æ•°

#### è‡ªå®šä¹‰å˜é‡ç”Ÿæˆå™¨

- `${custom:account}` æˆ– `${custom:username}` - ç”Ÿæˆ11ä½è´¦å·ï¼ˆåŒ…å«å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
- `${custom:password}` - ç”Ÿæˆ12ä½å¯†ç ï¼ˆåŒ…å«å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
- `${custom:email}` - ç”Ÿæˆéšæœºé‚®ç®±åœ°å€
- `${custom:phone}` - ç”Ÿæˆéšæœºæ‰‹æœºå·
- `${custom:chinese_name}` - ç”Ÿæˆéšæœºä¸­æ–‡å§“å

**å‚æ•°æ”¯æŒ**: `length=N` æˆ– `len=N` - æŒ‡å®šç”Ÿæˆå­—ç¬¦ä¸²çš„é•¿åº¦

**ç¤ºä¾‹**:

```json
{
  "requestBody": "{\"account\":\"${custom:account(length=11)}\",\"password\":\"${custom:password(length=12)}\"}"
}
```

#### å˜é‡è§£æžä¼˜å…ˆçº§

1. æ•°æ®é›†å˜é‡ (`${variableName}`)
2. ä¸Šä¸‹æ–‡å˜é‡ (`${context.variableName}`)
3. çŽ¯å¢ƒå˜é‡ (`${env.VARIABLE_NAME}`)
4. å†…ç½®å˜é‡ (`${timestamp}`, `${uuid}`, etc.)

### æ•°æ®åº“æŸ¥è¯¢æ”¯æŒ

**æ•°æ®åº“é…ç½®**: åœ¨ `src/test/resources/database.properties` ä¸­é…ç½®è¿žæŽ¥ä¿¡æ¯

**æµ‹è¯•ç”¨ä¾‹é…ç½®å­—æ®µ**:

- `dbQuery`: SQLæŸ¥è¯¢è¯­å¥
- `dbQueryParams`: æŸ¥è¯¢å‚æ•°æ•°ç»„
- `dbResultTarget`: æŸ¥è¯¢ç»“æžœå­˜å‚¨çš„ä¸Šä¸‹æ–‡å˜é‡å
- `dbQueryBeforeRequest`: true=è¯·æ±‚å‰æŸ¥è¯¢ï¼Œfalse=è¯·æ±‚åŽæŸ¥è¯¢

**ç¤ºä¾‹**:

```json
{
  "id": "db_query_example",
  "dbQuery": "SELECT username, email FROM users WHERE id = ?",
  "dbQueryParams": [1],
  "dbResultTarget": "userInfo",
  "dbQueryBeforeRequest": true,
  "endpoint": "/api/users/${context.userInfo.username}",
  "assertions": {
    "body.email": "${context.userInfo.email}"
  }
}
```

### æµ‹è¯•åˆ†ç»„ç®¡ç†

**é…ç½®æ–¹å¼**: åœ¨æµ‹è¯•ç”¨ä¾‹JSONä¸­æ·»åŠ  `groups` å­—æ®µï¼š

```json
{
  "id": "POST__wsms_pc_auth_login",
  "name": "postWsmsPcAuthLogin",
  "description": "ç”¨æˆ·ç™»å½•æŽ¥å£",
  "endpoint": "/wsms/pc/auth/login",
  "method": "POST",
  "groups": ["auth", "smoke", "critical"]
}
```

**å¸¸ç”¨åˆ†ç»„æ ‡ç­¾**:

- `smoke`: å†’çƒŸæµ‹è¯•ï¼Œæ ¸å¿ƒåŠŸèƒ½éªŒè¯
- `critical`: å…³é”®è·¯å¾„ï¼Œå¿…é¡»é€šè¿‡çš„æµ‹è¯•
- `regression`: å›žå½’æµ‹è¯•ï¼Œè¦†ç›–æ‰€æœ‰åŠŸèƒ½
- `auth`: è®¤è¯ç›¸å…³æµ‹è¯•
- `menu`: èœå•/å¯¼èˆªæµ‹è¯•
- `goods`: å•†å“ç®¡ç†æµ‹è¯•
- `price`: ä»·æ ¼ç›¸å…³æµ‹è¯•
- `user`: ç”¨æˆ·ç®¡ç†æµ‹è¯•

## è¿è¡Œå’Œè°ƒè¯•

### è¿è¡Œæµ‹è¯•å‘½ä»¤

#### 1. è¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹

```bash
mvn clean test
```

#### 2. è¿è¡Œå•ä¸ªæµ‹è¯•ç”¨ä¾‹

```bash
# Windows PowerShell
mvn test "-Dtest=UnifiedApiTest" "-DtestId=POST__wsms_pc_auth_login"

# Windows CMD
mvn test -Dtest=UnifiedApiTest -DtestId=POST__wsms_pc_auth_login
```

#### 3. è¿è¡ŒæŒ‡å®šåˆ†ç»„çš„æµ‹è¯•ç”¨ä¾‹

```bash
# Windows PowerShell
mvn test "-Dtest=UnifiedApiTest" "-DtestGroup=smoke"

# Windows CMD
mvn test -Dtest=UnifiedApiTest -DtestGroup=critical
```

### å¤±è´¥æ—¥å¿—è®°å½•

å½“æµ‹è¯•ç”¨ä¾‹å¤±è´¥æ—¶ï¼Œæ¡†æž¶ä¼šè‡ªåŠ¨è®°å½•è¯¦ç»†çš„å¤±è´¥ä¿¡æ¯ï¼š

**æŽ§åˆ¶å°è¾“å‡ºç¤ºä¾‹**:

```
================================================================================
âŒ æµ‹è¯•ç”¨ä¾‹å¤±è´¥: CustomAccountLogin
ID: custom_account_login
æè¿°: ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„11ä½è´¦å·ï¼ˆåŒ…å«ç‰¹æ®Šå­—ç¬¦ã€å­—ç¬¦ä¸²ã€è‹±æ–‡ç­‰ï¼‰è¿›è¡Œç™»å½•æµ‹è¯•
--------------------------------------------------------------------------------
ðŸ“‹ è¯·æ±‚ä¿¡æ¯:
   URL: https://testntr.yaoshibang.cn/wsms/pc/auth/login
   æ–¹æ³•: POST
   è¯·æ±‚å¤´:
     Content-Type: application/json;charset=UTF-8
     Origin: https://testntr.yaoshibang.cn
   è¯·æ±‚ä½“: {"account":"${custom:account(length=11)}","password":"${custom:password(length=12)}","token":""}
--------------------------------------------------------------------------------
ðŸ“‹ å“åº”ä¿¡æ¯:
   çŠ¶æ€ç : 200
   å“åº”æ—¶é—´: 45ms
   å“åº”å¤´: [...]
   å“åº”ä½“: {"code":"40003","message":"æ‰‹æœºå·ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°è¾“å…¥æˆ–è”ç³»ç®¡ç†å‘˜","data":null}
--------------------------------------------------------------------------------
âŒ å¤±è´¥åŽŸå› : 1 expectation failed.
JSON path code doesn't match.
Expected: 40001
  Actual: 40003
================================================================================
```

**æ—¥å¿—æ–‡ä»¶**: æ‰€æœ‰å¤±è´¥ä¿¡æ¯åŒæ—¶è®°å½•åˆ° `target/logs/test_failures.log` æ–‡ä»¶ä¸­ï¼ˆUTF-8ç¼–ç ï¼‰

### ç”Ÿæˆ Allure æŠ¥å‘Š

```bash
allure serve target/allure-results
```

## é¡¹ç›®æž¶æž„

### åˆ†å±‚è®¾è®¡

```
my-rest-assured-test-project/
â”œâ”€â”€ src/main/java/com/example/api/           # APIæœåŠ¡å±‚
â”‚   â”œâ”€â”€ ApiClient.java                      # é€šç”¨APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ LoginService.java                   # ç™»å½•æœåŠ¡ç±»
â”‚   â””â”€â”€ dto/                                # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ src/main/java/com/example/model/        # æµ‹è¯•æ•°æ®æ¨¡åž‹
â”‚   â”œâ”€â”€ TestCase.java                       # æµ‹è¯•ç”¨ä¾‹æ•°æ®æ¨¡åž‹
â”‚   â”œâ”€â”€ TestDataSet.java                    # æµ‹è¯•æ•°æ®é›†æ¨¡åž‹
â”‚   â””â”€â”€ DataExtractor.java                  # æ•°æ®æå–å™¨æ¨¡åž‹
â”œâ”€â”€ src/main/java/com/example/service/      # æµ‹è¯•æœåŠ¡å±‚
â”‚   â”œâ”€â”€ HarParser.java                      # HARæ–‡ä»¶è§£æžå™¨
â”‚   â”œâ”€â”€ TestCaseGenerator.java              # æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ TestDataLoader.java                 # æµ‹è¯•æ•°æ®åŠ è½½å™¨
â”‚   â”œâ”€â”€ TestExecutor.java                   # æµ‹è¯•æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ TestContext.java                    # æµ‹è¯•ä¸Šä¸‹æ–‡ç®¡ç†å™¨
â”‚   â”œâ”€â”€ VariableResolver.java               # å˜é‡è§£æžå™¨
â”‚   â””â”€â”€ UnifiedTestDataLoader.java          # ç»Ÿä¸€æµ‹è¯•æ•°æ®åŠ è½½å™¨
â””â”€â”€ src/test/java/com/example/apitest/      # æµ‹è¯•ç”¨ä¾‹å±‚
    â””â”€â”€ UnifiedApiTest.java                 # ç»Ÿä¸€APIæµ‹è¯•ç±»
```

### æµ‹è¯•æ•°æ®æ–‡ä»¶

- **æµ‹è¯•ç”¨ä¾‹**: `src/test/resources/testcases/` ç›®å½•ä¸‹çš„æ‰€æœ‰JSONæ–‡ä»¶
- **æ•°æ®åº“é…ç½®**: `src/test/resources/database.properties`
- **å¤±è´¥æ—¥å¿—**: `target/logs/test_failures.log`

## æœ€ä½³å®žè·µ

### 1. HARæ–‡ä»¶å½•åˆ¶å»ºè®®

- å½•åˆ¶å®Œæ•´çš„ç”¨æˆ·æ“ä½œæµç¨‹ï¼ˆç™»å½•â†’ä¸šåŠ¡æ“ä½œâ†’ç™»å‡ºï¼‰
- åœ¨æµè§ˆå™¨ä¸­è¿‡æ»¤åªä¿ç•™XHR/Fetchè¯·æ±‚
- éªŒè¯ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ˜¯å¦ç¬¦åˆé¢„æœŸ

### 2. æµ‹è¯•ç”¨ä¾‹è®¾è®¡åŽŸåˆ™

- **åˆ†ç¦»å…³æ³¨ç‚¹**: APIé€»è¾‘ä¸Žæµ‹è¯•é€»è¾‘å®Œå…¨åˆ†ç¦»
- **é…ç½®é©±åŠ¨**: é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†æµ‹è¯•ç”¨ä¾‹ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
- **æœ€å°ä¾èµ–**: åªåœ¨å¿…è¦æ—¶æ·»åŠ ä¾èµ–ï¼Œé¿å…è¿‡åº¦è€¦åˆ
- **åŽŸå­æ€§æµ‹è¯•**: å°½å¯èƒ½è®¾è®¡ç‹¬ç«‹çš„æµ‹è¯•ç”¨ä¾‹

### 3. å®‰å…¨æ³¨æ„äº‹é¡¹

- **æ•æ„Ÿä¿¡æ¯**: ä¸è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å­˜å‚¨æ˜Žæ–‡å¯†ç ï¼Œä½¿ç”¨åŠ å¯†æˆ–çŽ¯å¢ƒå˜é‡
- **Tokenç®¡ç†**: å®šæœŸæ›´æ–°æµ‹è¯•ç”¨çš„Token
- **ç‰ˆæœ¬æŽ§åˆ¶**: å°†ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æŽ§åˆ¶ï¼Œä½†æŽ’é™¤HARæºæ–‡ä»¶

### 4. ç»´æŠ¤å’Œæ‰©å±•

- **å®šæœŸæ›´æ–°**: å½“APIå‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–°å½•åˆ¶HARæ–‡ä»¶å¹¶æ›´æ–°æµ‹è¯•ç”¨ä¾‹
- **çŽ¯å¢ƒé…ç½®**: ä½¿ç”¨ä¸åŒçŽ¯å¢ƒçš„é…ç½®æ–‡ä»¶ç®¡ç†Base URL
- **æ‰©å±•æ€§**: æ˜“äºŽæ·»åŠ æ–°çš„æŽ¥å£å’Œæµ‹è¯•åœºæ™¯

## CI/CD é›†æˆ

è¯¥é¡¹ç›®åŒ…å«GitHub Actionså·¥ä½œæµï¼Œåœ¨æ¯æ¬¡å‘mainåˆ†æ”¯æŽ¨é€ä»£ç æˆ–æäº¤æ‹‰å–è¯·æ±‚æ—¶éƒ½ä¼šè‡ªåŠ¨è¿è¡Œæµ‹è¯•å¹¶ç”ŸæˆAllureæŠ¥å‘Šã€‚

## æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

1. **SSLè¯ä¹¦é”™è¯¯**

   ```java
   RestAssured.config = RestAssuredConfig.config()
       .sslConfig(SSLConfig.sslConfig().relaxedHTTPSValidation());
   ```
2. **ä¸­æ–‡ç¼–ç é—®é¢˜**

   ```bash
   mvn test -Dfile.encoding=UTF-8
   ```
3. **ä¾èµ–å¾ªçŽ¯é”™è¯¯**

   - é‡æ–°è®¾è®¡æµ‹è¯•é€»è¾‘ï¼Œæ¶ˆé™¤å¾ªçŽ¯ä¾èµ–
4. **ä¸Šä¸‹æ–‡å˜é‡æœªæ‰¾åˆ°**

   - æ£€æŸ¥å‰ç½®æµ‹è¯•ç”¨ä¾‹æ˜¯å¦æ­£ç¡®è®¾ç½®äº†è¯¥å˜é‡
5. **å‚æ•°åŒ–æµ‹è¯•æ•°æ®ä¸ç”Ÿæ•ˆ**

   - ç¡®è®¤å˜é‡åä¸Žæ•°æ®é›†ä¸­çš„é”®åå®Œå…¨åŒ¹é…

---

æœ¬æ¡†æž¶æ—¨åœ¨æä¾›ä¸€ä¸ªçµæ´»ã€å¯ç»´æŠ¤ã€åŠŸèƒ½å¼ºå¤§çš„APIè‡ªåŠ¨åŒ–æµ‹è¯•è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©å›¢é˜Ÿæé«˜æµ‹è¯•æ•ˆçŽ‡å’Œè½¯ä»¶è´¨é‡ã€‚é€šè¿‡HARæ–‡ä»¶è‡ªåŠ¨åŒ–è½¬æ¢ã€æ™ºèƒ½ä¾èµ–ç®¡ç†ã€æ•°æ®é©±åŠ¨æµ‹è¯•ç­‰ç‰¹æ€§ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿæž„å»ºå®Œæ•´çš„APIæµ‹è¯•å¥—ä»¶ã€‚
