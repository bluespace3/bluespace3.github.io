# åŠ å¯†åŠŸèƒ½éƒ¨ç½²é€‚é…

## âœ… å·²å®Œæˆçš„é…ç½®

GitHub Actions ç°å·²é…ç½®ä¸º**è‡ªåŠ¨åŠ å¯†**æ‰€æœ‰åŠ å¯†æ–‡ç« ï¼

### æ›´æ–°å†…å®¹

`.github/workflows/hugo.yml` å·²æ·»åŠ ä»¥ä¸‹æ­¥éª¤ï¼š

1. âœ… **Setup Python** - å®‰è£… Python ç¯å¢ƒ
2. âœ… **Install dependencies** - å®‰è£…åŠ å¯†ä¾èµ–ï¼ˆpycryptodomeã€beautifulsoup4ã€lxmlï¼‰
3. âœ… **Copy decrypt.js** - å¤åˆ¶è§£å¯†è„šæœ¬åˆ° static/
4. âœ… **Build** - æ„å»º Hugo ç½‘ç«™
5. âœ… **Encrypt content** - è¿è¡Œ hugo-encryptor åŠ å¯†æ–‡ç« 
6. âœ… **Deploy** - éƒ¨ç½²åˆ° gh-pages åˆ†æ”¯

## ğŸ”„ æ–°çš„éƒ¨ç½²æµç¨‹

```
æœ¬åœ°ä¿®æ”¹ â†’ git push
           â†“
    GitHub Actions è§¦å‘
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Setup Hugo        â”‚
    â”‚ 2. Setup Python      â”‚ â† æ–°å¢
    â”‚ 3. å®‰è£…åŠ å¯†ä¾èµ–      â”‚ â† æ–°å¢
    â”‚ 4. å¤åˆ¶ decrypt.js   â”‚ â† æ–°å¢
    â”‚ 5. hugo build        â”‚
    â”‚ 6. è¿è¡ŒåŠ å¯†è„šæœ¬       â”‚ â† æ–°å¢
    â”‚ 7. éƒ¨ç½²åˆ° gh-pages   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    GitHub Pages æ›´æ–°
```

## ğŸ“ ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ 1ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# Windows
deploy.bat

# Linux/macOS
./deploy.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æŸ¥å¹¶å¤åˆ¶ decrypt.js
2. ç”Ÿæˆç½‘ç«™
3. åŠ å¯†æ–‡ç« ï¼ˆæœ¬åœ°ï¼‰
4. æäº¤å¹¶æ¨é€åˆ° GitHub
5. GitHub Actions å†æ¬¡æ„å»ºå¹¶åŠ å¯†ï¼ˆäº‘ç«¯ï¼‰

**æ³¨æ„**ï¼šåŠ å¯†ä¼šè¿è¡Œä¸¤æ¬¡ï¼ˆæœ¬åœ° + äº‘ç«¯ï¼‰ï¼Œè¿™ä¸å½±å“ç»“æœï¼Œåªæ˜¯é‡å¤äº†æ­¥éª¤ã€‚

### æ–¹å¼ 2ï¼šæ‰‹åŠ¨ Git æ“ä½œ

```bash
# 1. æœ¬åœ°ç”Ÿæˆå’ŒåŠ å¯†
hugo --cleanDestinationDir
python tools/hugo_encryptor/hugo-encryptor.py

# 2. æäº¤åˆ° GitHub
git add .
git commit -m "æ›´æ–°å†…å®¹"
git push origin main
```

æ¨é€åï¼ŒGitHub Actions ä¼šè‡ªåŠ¨ï¼š
- æ„å»º
- **å†æ¬¡åŠ å¯†**ï¼ˆè¦†ç›–ç¬¬ä¸€æ¬¡åŠ å¯†ï¼‰
- éƒ¨ç½²

## ğŸ” éªŒè¯åŠ å¯†æ˜¯å¦ç”Ÿæ•ˆ

### 1. æŸ¥çœ‹ GitHub Actions æ—¥å¿—

è®¿é—®ï¼šhttps://github.com/bluespace3/bluespace3.github.io/actions

æŸ¥çœ‹æœ€æ–°çš„å·¥ä½œæµè¿è¡Œï¼Œåº”è¯¥èƒ½çœ‹åˆ° "Encrypt content" æ­¥éª¤ã€‚

### 2. æ£€æŸ¥éƒ¨ç½²åçš„ç½‘ç«™

è®¿é—®ä½ çš„åŠ å¯†æ–‡ç« ï¼Œè¾“å…¥å¯†ç ï¼ŒéªŒè¯æ˜¯å¦èƒ½æ­£å¸¸è§£å¯†ã€‚

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. æœ¬åœ°ä»éœ€è¿è¡ŒåŠ å¯†è„šæœ¬

è™½ç„¶ GitHub Actions ä¼šè‡ªåŠ¨åŠ å¯†ï¼Œä½†**æœ¬åœ°é¢„è§ˆæ—¶ä»éœ€è¿è¡Œ**ï¼š

```bash
hugo --cleanDestinationDir
python tools/hugo_encryptor/hugo-encryptor.py
hugo server -D
```

å¦åˆ™æœ¬åœ°é¢„è§ˆæ—¶åŠ å¯†å†…å®¹æ— æ³•æŸ¥çœ‹ã€‚

### 2. decrypt.js å¿…é¡»åœ¨ static/ ç›®å½•

GitHub Actions ä¼šè‡ªåŠ¨å¤åˆ¶ï¼Œä½†å¦‚æœæœ¬åœ°æ²¡æœ‰ï¼Œé¢„è§ˆä¼šå¤±è´¥ã€‚

æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
```bash
ls static/decrypt.js
```

å¦‚æœä¸å­˜åœ¨ï¼Œæ‰‹åŠ¨å¤åˆ¶ï¼š
```bash
cp tools/hugo_encryptor/decrypt.js static/
```

### 3. Python ä¾èµ–é—®é¢˜

GitHub Actions ä½¿ç”¨ `pycryptodome` è€Œä¸æ˜¯ `pycrypto`ï¼ˆåè€…åœ¨ Linux ä¸Šç¼–è¯‘å¤±è´¥ï¼‰ã€‚

## ğŸ¯ æœ€ä½³å®è·µ

### æ¨èçš„å‘å¸ƒæµç¨‹

```bash
# å®Œæ•´å‘å¸ƒæµç¨‹
deploy.bat

# æˆ–æ‰‹åŠ¨æ­¥éª¤
hugo --cleanDestinationDir
python tools/hugo_encryptor/hugo-encryptor.py
git add .
git commit -m "æ›´æ–°å†…å®¹"
git push origin main
```

### æœ¬åœ°å¼€å‘æµç¨‹

```bash
# 1. ç¼–è¾‘æ–‡ç« 
# 2. é¢„è§ˆï¼ˆéœ€è¦å…ˆåŠ å¯†ï¼‰
hugo --cleanDestinationDir
python tools/hugo_encryptor/hugo-encryptor.py
hugo server -D

# 3. æ»¡æ„åå‘å¸ƒ
deploy.bat
```

## ğŸ”§ æ•…éšœæ’é™¤

### Q: GitHub Actions åŠ å¯†å¤±è´¥ï¼Ÿ

**A**: æ£€æŸ¥ Actions æ—¥å¿—ï¼Œå¸¸è§åŸå› ï¼š
- Python ä¾èµ–å®‰è£…å¤±è´¥ â†’ é‡æ–°è¿è¡Œ Actions
- hugo-encryptor.py è·¯å¾„é”™è¯¯ â†’ ç¡®è®¤æ–‡ä»¶åœ¨ tools/hugo_encryptor/

### Q: æœ¬åœ°é¢„è§ˆæ—¶åŠ å¯†ä¸ç”Ÿæ•ˆï¼Ÿ

**A**: æ£€æŸ¥ï¼š
```bash
# 1. ç¡®è®¤ decrypt.js å­˜åœ¨
ls static/decrypt.js

# 2. ç¡®è®¤è¿è¡Œäº†åŠ å¯†è„šæœ¬
python tools/hugo_encryptor/hugo-encryptor.py

# 3. ç¡®è®¤ç”Ÿæˆçš„ HTML æœ‰åŠ å¯†æ ‡è®°
grep "hugo-encryptor-cipher-text" public/post/æ–‡ç« /index.html
```

### Q: éƒ¨ç½²ååŠ å¯†æ–‡ç« æ— æ³•è§£å¯†ï¼Ÿ

**A**: 
1. æ£€æŸ¥ GitHub Actions æ—¥å¿—
2. ç¡®è®¤ "Encrypt content" æ­¥éª¤æˆåŠŸ
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜é‡è¯•

## ğŸ“Š å¯¹æ¯”ï¼šæ›´æ–°å‰å

### æ›´æ–°å‰ï¼ˆæ²¡æœ‰åŠ å¯†ï¼‰

```yaml
- Setup Hugo
- Build
- Deploy
```

**é—®é¢˜**ï¼šåŠ å¯†æ–‡ç« åœ¨ GitHub Pages ä¸Šæ— æ³•è§£å¯†ï¼

### æ›´æ–°åï¼ˆè‡ªåŠ¨åŠ å¯†ï¼‰

```yaml
- Setup Hugo
- Setup Python      â† æ–°å¢
- å®‰è£…åŠ å¯†ä¾èµ–      â† æ–°å¢
- å¤åˆ¶ decrypt.js   â† æ–°å¢
- Build
- Encrypt content   â† æ–°å¢
- Deploy
```

**ä¼˜åŠ¿**ï¼šåŠ å¯†æ–‡ç« åœ¨ GitHub Pages ä¸Šå¯ä»¥æ­£å¸¸è§£å¯†ï¼

## âœ… éªŒè¯éƒ¨ç½²é…ç½®

### æŸ¥çœ‹å½“å‰é…ç½®

```bash
cat .github/workflows/hugo.yml
```

åº”è¯¥åŒ…å« "Encrypt content" æ­¥éª¤ã€‚

### æµ‹è¯•éƒ¨ç½²

```bash
# 1. ä¿®æ”¹ä»»æ„åŠ å¯†æ–‡ç« 
# 2. æäº¤å¹¶æ¨é€
git add .
git commit -m "test"
git push origin main

# 3. æŸ¥çœ‹ GitHub Actions
# è®¿é—® https://github.com/bluespace3/bluespace3.github.io/actions
```

## ğŸ‰ å®Œæˆ

ç°åœ¨ä½ çš„åŠ å¯†åŠŸèƒ½å·²ç»å®Œå…¨é€‚é… GitHub Actions éƒ¨ç½²æµç¨‹äº†ï¼

æ— è®ºæ˜¯æ‰‹åŠ¨ push è¿˜æ˜¯ä½¿ç”¨ deploy.batï¼ŒåŠ å¯†æ–‡ç« éƒ½ä¼šè‡ªåŠ¨åœ¨äº‘ç«¯åŠ å¯†å¹¶æ­£å¸¸å‘å¸ƒã€‚
